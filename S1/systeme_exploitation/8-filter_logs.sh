#!/bin/bash

if [ $# -ne 2 ]; then
    echo "Il n'y a pas assez d'arguments"
    exit 1
fi

dossier=$1
niveau_gravite=$2

if [ ! -d "$dossier" ]; then
    echo "Le dossier spécifié n'existe pas"
    exit 1
fi

for fichier in "$dossier"/*
do
    if [ "$niveau_gravite" == "INFO" ]; then
        cat "$fichier"
        elif [ "$niveau_gravite" == "WARNING" ]; then
        grep -E "WARNING|ERROR" "$fichier"
        elif [ "$niveau_gravite" == "ERROR" ]; then
        grep "ERROR" "$fichier"
    fi
done